<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f0f2f5; margin: 0; }
        .card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 320px; text-align: center; }
        .hidden { display: none; }
        button { width: 100%; padding: 10px; margin: 10px 0; border: none; border-radius: 4px; background: #1a73e8; color: white; cursor: pointer; font-size: 16px; }
        button:hover { background: #1557b0; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .error { color: #d93025; font-size: 14px; margin-top: 10px; }
        .account-btn { background: #f8f9fa; color: #3c4043; border: 1px solid #dadce0; text-align: left; padding-left: 15px; }
        .account-btn:hover { background: #f1f3f4; }
    </style>
</head>
<body>

<div class="card" id="step1">
    <h2>Please Login To Continue</h2>
    <button onclick="goToStep2()">Login</button>
</div>

<div class="card hidden" id="step2">
    <h2>Choose account:</h2>
    <div id="account-list"></div>
</div>

<div class="card hidden" id="step3">
    <h2 id="welcome-msg">Welcome back</h2>
    <p>Please enter password to continue</p>
    <input type="password" id="password-input" placeholder="Wachtwoord">
    <button onclick="checkPassword()">Continue</button>
    <div id="error-msg" class="error"></div>
</div>

<script>
    // Haal de data uit de URL
    // Voorbeeld: .../432789-www.google.com.chat-hallo-hoi-doei
    const path = window.location.pathname.split('/').pop();
    const parts = path.split('-'); // Splits op het streepje
    
    const correctPassword = parts[0]; // "432789"
    
    // De link repareren (derde punt wordt een /)
    // www.google.com.chat -> www.google.com/chat
    let targetLink = parts[1] ? parts[1].replace(/\.(?=[^.]*$)/, '/') : "https://google.com";
    if (!targetLink.startsWith('http')) targetLink = 'https://' + targetLink;

    // De accounts (alles na het tweede streepje)
    const accounts = parts.slice(2); 

    function goToStep2() {
        document.getElementById('step1').classList.add('hidden');
        document.getElementById('step2').classList.remove('hidden');
        
        const list = document.getElementById('account-list');
        accounts.forEach(acc => {
            const btn = document.createElement('button');
            btn.className = 'account-btn';
            btn.innerText = acc.charAt(0).toUpperCase() + acc.slice(1);
            btn.onclick = () => goToStep3(acc);
            list.appendChild(btn);
        });
    }

    let selectedUser = "";
    function goToStep3(user) {
        selectedUser = user;
        document.getElementById('step2').classList.add('hidden');
        document.getElementById('step3').classList.remove('hidden');
        document.getElementById('welcome-msg').innerText = `Welcome back, ${user}`;
    }

    function checkPassword() {
        const input = document.getElementById('password-input').value;
        const errorDiv = document.getElementById('error-msg');
        
        const errorMessages = [
            "Please try again",
            "Password incorrect",
            "Please try again later"
        ];

        if (input === correctPassword) {
            window.location.href = targetLink;
        } else {
            const randomError = errorMessages[Math.floor(Math.random() * errorMessages.length)];
            errorDiv.innerText = randomError;
            document.getElementById('password-input').value = "";
        }
    }
</script>

</body>
</html>
